<!--
Author: WebThemez
Author URL: http://webthemez.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="Real Estate Builders Free Responsive Website Templates - icon">
	<meta name="author" content="webThemez.com">
	<title>Free Html5 Responsive Web Template</title>
	<link rel="favicon" href="assets/images/favicon.png">
	<link rel="stylesheet" media="screen" href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,700">
	<link rel="stylesheet" href="assets/css/bootstrap.min.css">
	<link rel="stylesheet" href="assets/css/font-awesome.min.css">
	<!-- Custom styles for our template -->

	<link rel="stylesheet" href="component/layui/css/layui.css">
	<link rel="stylesheet" href="assets/css/bootstrap-theme.css" media="screen">
	<link rel="stylesheet" href="assets/css/style.css">
	<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!--[if lt IE 9]>
	<script src="assets/js/html5shiv.js"></script>
	<script src="assets/js/respond.min.js"></script>
	<![endif]-->
</head>

<body>
	<!-- Fixed navbar -->
	<div class="navbar navbar-inverse">
		<div class="container">
			<div class="navbar-header">
				<!-- Button for smallest screens -->
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button>
				<a class="navbar-brand" href="index.html">
					<img src="assets/images/logo.png" alt="Techro HTML5 template"></a>
			</div>
			<div class="navbar-collapse collapse">
				<ul class="nav navbar-nav pull-right mainNav">
					<li><a href="index.html">首页</a></li>
					<li><a href="about.html">关于我们</a></li>
					<!--<li><a href="price.html">Price</a></li>-->
					<li><a href="projects.html">所有产品</a></li>

					<li><a href="personal.html">个人中心</a></li>
					<li  class="active"><a href="order.html">订单管理</a></li>
				</ul>
			</div>
			<!--/.nav-collapse -->
		</div>
	</div>
	<!-- /.navbar -->

	<header id="head" class="secondary">
		<div class="container">
			<div class="row">
				<div class="col-sm-8">
					<h1>Services</h1>
				</div>
			</div>
		</div>
	</header>

	<div class="layui-card">
		<div class="layui-card-body">
			<table id="car-record-table" lay-filter="car-record-table"></table>
		</div>
	</div>
    <footer id="footer">
	 
		<div class="footer2">
			<div class="container">
				<div class="row">

					<div class="col-md-6 panel">
						<div class="panel-body">
							<p class="simplenav">
								<a href="index.html">Home</a> |
								<a href="about.html">About</a> |
								<a href="order.html">Services</a> |
								<a href="price.html">Price</a> |
								<a href="projects.html">Projects</a> |
								<a href="personal.html">Contact</a>
							</p>
						</div>
					</div>

					<div class="col-md-6 panel">
						<div class="panel-body">
							<p class="text-right">
								Copyright &copy; 2015. Template by <a href="http://webthemez.com/" rel="develop">WebThemez.com</a>
							</p>
						</div>
					</div>

				</div>
				<!-- /row of panels -->
			</div>
		</div>
	</footer>




	<!-- JavaScript libs are placed at the end of the document so the pages load faster -->
	<script type='text/javascript' src='assets/js/jquery.min.js'></script>
	<script src="component/layui/layui.js"></script>
	<script type="text/html" id="car-bar">
		<button class="pear-btn pear-btn-primary pear-btn-sm" lay-event="edit"><i class="layui-icon layui-icon-edit"></i></button>
	</script>
	<script>
		layui.use(['table','form','jquery'],function () {
			let table = layui.table;
			let form = layui.form;
			let $ = layui.jquery;

			let MODULE_PATH = "operate/";

			let cols = [
				[
					{title: "编号", field: "id", align:'center', width:80},
					{title: "汽车名称", field: "carName", align:'center', width:100},
					{title: "开始时间", field: "createTime", align:'center', width:100},
					{title: "结束时间", field: "endTime", align:'center', width:100},
					{title: "租赁时长/天", field: "timeLong", align:'center', width:100},
					{title: "押金", field: "deposit", align:'center', width:100},
					{title: "租金", field: "rent", align:'center', width:100},
					{title: "订单状态", field: "status", align:'center', width:100},
					/*{title: '图片', field: 'carImgUrl', align:'center',templet: function (d) {
                            return "<div onclick='showBigImage(this)'><img src=\"/image/" + d.imgUrl + "\"  style=\"width: 40px\" lay-event=\"showPic\" ></div>";}},*/
					{title: '操作', toolbar: '#car-bar', align:'center', width:100}
				]
			]
			var tableIns = table.render({
				elem: '#car-record-table',
				url: '/api/carRecord/selectByCustomerId/'+1,
				page: true ,
				cols: cols ,
				skin: 'line',
				toolbar: '#car-toolbar',
				defaultToolbar: [{
					layEvent: 'refresh',
					icon: 'layui-icon-refresh',
				}, 'filter', 'print', 'exports']
			});
			table.on('tool(car-record-table)', function(obj){
				if(obj.event === 'remove'){
					window.remove(obj);
				} else if(obj.event === 'edit'){
					window.edit(obj);
				}
			});
			table.on('toolbar(car-record-table)', function(obj){
				if(obj.event === 'add'){
					window.add();
				} else if(obj.event === 'refresh'){
					window.refresh();
				} else if(obj.event === 'batchRemove'){
					window.batchRemove(obj);
				}
			});

			form.on('submit(brand-query)', function(data){
				var formData = data.field;
				var name = formData.name;
				tableIns.reload({
					page: {
						curr: 1 //重新从第 1 页开始
					}
					, where: {//这里传参  向后台
						queryName: name,
						//可传多个参数到后台...  ，分隔
					}
					, url: '/api/carRecord/selectByName/'+name//后台做模糊搜索接口路径
					, method: 'get'
				});
				return false;
			});

			form.on('switch(role-status)', function(obj){
				layer.tips(this.value + ' ' + this.name + '：'+ obj.elem.checked, obj.othis);
			});

			window.edit = function(obj){
				var data = obj.data;
				layer.open({
					type: 2,
					title: '修改',
					shade: 0.1,
					area: ['500px', '300px'],
					content: '/api/carRecord/toEdit/?id='+data.id
				});
			}
			window.refresh = function(){
				table.reload('car-record-table');
			}

		})

	</script>
</body>
</html>
