<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="Real Estate Builders Free Responsive Website Templates - icon">
	<meta name="author" content="webThemez.com">
	<title>Real Estate Builders Free html5 Website Templates - icon</title>
	<link rel="favicon" href="assets/images/favicon.png">
	<link rel="stylesheet" media="screen" href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,700">
	<link rel="stylesheet" href="assets/css/bootstrap.min.css">
	<link rel="stylesheet" href="assets/css/font-awesome.min.css">
	<!-- Custom styles for our template -->
	<link rel="stylesheet" href="assets/css/bootstrap-theme.css" media="screen">
	<link rel="stylesheet" type="text/css" href="assets/css/isotope.css" media="screen" />
	<link rel="stylesheet" href="assets/js/fancybox/jquery.fancybox.css" type="text/css" media="screen" />
	<link rel="stylesheet" href="assets/css/style.css">
	<link rel="stylesheet" href="component/layui/css/layui.css">
	<link rel="stylesheet" href="component/pear/css/pear.css">
	<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!--[if lt IE 9]>
	<script src="assets/js/html5shiv.js"></script>
	<script src="assets/js/respond.min.js"></script>
	<![endif]-->
	<style>
		img{
			width: 360px;
			height: 270px;
			object-fit: scale-down;
			background-size:contain;
		}
		#search {
			background-color: #FF822F !important;
		}
	</style>
</head>

<body>
	<!-- Fixed navbar -->
	<div class="navbar navbar-inverse">
		<div class="container">
			<div class="navbar-header">
				<!-- Button for smallest screens -->
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button>
				<a class="navbar-brand" href="index.html">
					<img src="assets/images/logo.png" alt="Techro HTML5 template"></a>
			</div>
			<div class="navbar-collapse collapse">
				<ul class="nav navbar-nav pull-right mainNav">
					<li><a href="index.html">首页</a></li>
					<li><a href="about.html">关于我们</a></li>
					<li><a href="services.html">Services</a></li>
					<!--<li><a href="price.html">Price</a></li>-->
					<li class="active"><a href="projects.html">Projects</a></li>
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">Pages <b class="caret"></b></a>
						<ul class="dropdown-menu">
							<li><a href="sidebar-right.html">Right Sidebar</a></li>
							<li><a href="#">Dummy Link1</a></li>
							<li><a href="#">Dummy Link2</a></li>
							<li><a href="#">Dummy Link3</a></li>
						</ul>
					</li>
					<li><a href="contact.html">Contact</a></li>
				</ul>
			</div>
			<!--/.nav-collapse -->
		</div>
	</div>
	<!-- /.navbar -->

	<header id="head" class="secondary">
		<div class="container">
			<div class="row">
				<div class="col-sm-8">
					<h1>Our Projects</h1>
				</div>
			</div>
		</div>
	</header>

	<!-- container -->
	<section class="container">
		<div class="row">
			<div class="col-md-12">
				<section id="portfolio" class="page-section section appear clearfix">
					<br />
					<br />
					<div class="col-md-12">
						<div class="layui-card">
						<div class="layui-card-body">
							<form class="layui-form" action="">
								<div class="layui-form-item">
									<div class="layui-form-item">
										<label class="layui-form-label"><span style="color: red">*</span>选择地区</label>
										<div class="layui-input-inline">
											<select id="provinceId" name="provinceId" lay-filter="provinceId">
												<option value="">请选择省</option>
											</select>
										</div>
										<div class="layui-input-inline" >
											<select id="cityId" name="cityId" lay-filter="cityId" >
												<option value="">请选择市</option>
											</select>
										</div>
										<div class="layui-input-inline">
											<select id="locationId" name="locationId" lay-filter="locationId">
												<option value="">请选择门店</option>
											</select>
										</div>
									</div>

									<div class="layui-form-item">
										<label class="layui-form-label">汽车类型</label>
										<div class="layui-input-block">
											<select name="typeId" id="typeId" >
												<option value="">请选择</option>
											</select>
										</div>
									</div>
									<div id="slideTest10" class="demo-slider"></div>
									<div class="layui-form-item">
										<label class="layui-form-label">单价/天</label>
										<div class="layui-input-block">
											<input type="text" id="price" name="price" required="" lay-verify="price" autocomplete="off" class="layui-input">
										</div>
									</div>
									<div class="layui-form-item">
										<label class="layui-form-label">汽车品牌</label>
										<div class="layui-input-block">
											<select name="brandId" id="brandId" >
												<option value="">请选择</option>
											</select>
										</div>
									</div>
									<div class="layui-form-item">
										<label class="layui-form-label">汽车名称</label>
										<div class="layui-input-inline">
											<input type="text" name="realName" placeholder="" class="layui-input">
										</div>
									</div>

									<button class="pear-btn pear-btn-md pear-btn-primary" lay-submit lay-filter="role-query">
										<i class="layui-icon layui-icon-search" id="search"></i>
										查询
									</button>
									<button type="reset" class="pear-btn pear-btn-md">
										<i class="layui-icon layui-icon-refresh"></i>
										重置
									</button>
								</div>
							</form>
						</div>
					</div></div>



					<div class="row">
						<nav id="filter" class="col-md-12 text-center">
							<ul>
								<li><a href="#" class="current btn-theme btn-small" data-filter="*">All</a></li>
								<li><a href="#" class="btn-theme btn-small" data-filter=".webdesign">Villas</a></li>
								<li><a href="#" class="btn-theme btn-small" data-filter=".photography">Shopping Mall</a></li>
								<li><a href="#" class="btn-theme btn-small" data-filter=".print">Township</a></li>
							</ul>
						</nav>
						<div class="col-md-12">
							<div class="row"  id="carList">


							</div>


						</div>
					</div>

				</section>
			</div>
		</div>

	</section>
	<!-- /container -->


    <footer id="footer">
	 
		<div class="footer2">
			<div class="container">
				<div class="row">

					<div class="col-md-6 panel">
						<div class="panel-body">
							<p class="simplenav">
								<a href="index.html">Home</a> |
								<a href="about.html">About</a> |
								<a href="services.html">Services</a> |
								<a href="price.html">Price</a> |
								<a href="projects.html">Projects</a> |
								<a href="contact.html">Contact</a>
							</p>
						</div>
					</div>

					<div class="col-md-6 panel">
						<div class="panel-body">
							<p class="text-right">
								Copyright &copy; 2015. Template by <a href="http://webthemez.com/" rel="develop">WebThemez.com</a>
							</p>
						</div>
					</div>

				</div>
				<!-- /row of panels -->
			</div>
		</div>
	</footer>

	<script type='text/javascript' src='assets/js/jquery.min.js'></script>
	<script type='text/javascript' src='assets/js/fancybox/jquery.fancybox.pack.js'></script>

	<script type='text/javascript' src='assets/js/jquery.mobile.customized.min.js'></script>
	<script type='text/javascript' src='component/layui/layui.js'></script>
	<script src="assets/js/bootstrap.min.js"></script>
	<script src="assets/js/custom.js"></script>

	<!-- JavaScript libs are placed at the end of the document so the pages load faster -->
	<script src="assets/js/jquery.cslider.js"></script>
	<script src="assets/js/jquery.isotope.min.js"></script>
	<script src="assets/js/custom.js"></script>
	<script>
		layui.use(['slider','form','jquery'],function(){
			getCarType();
			getCarBrand();
			getProvince();
			let form = layui.form;
			let $ = layui.jquery;
			var slider = layui.slider;
			slider.render({
				elem: '#slideTest10'
				,value: [30, 60] //初始值
				,range: true //范围选择
			});
			form.on('submit(car-save)', function(data){
				var datas = data.field;
				$.ajax({
					url:'/api/car/add',
					data:JSON.stringify(datas),
					dataType:'json',
					contentType:'application/json',
					type:'post',
					success:function(result){
						if(result.success){
							layer.msg(result.msg,{icon:1,time:1000},function(){
								parent.layer.close(parent.layer.getFrameIndex(window.name));//关闭当前页
								parent.location.reload();
							});
						}else{
							layer.msg(result.msg,{icon:2,time:1000});
						}
					}
				})
				return false;
			});
			form.on('select(provinceId)',function(data){
				debugger
				var provinceId = data.value;
				$.ajax({
					url:'/api/car/city/'+provinceId,
					success:function(res){
						if(res.success){
							for(var i =0;i<res.data.length;i++){
								$("#cityId").append("<option value=\""+res.data[i].id+"\">"+res.data[i].name+"</option>");
							}
							//重新渲染
							layui.form.render("select");
						}else{
							layer.msg(res.message);
						}
					}
				})
			});
			form.on('select(cityId)',function(data){
				debugger
				var cityId = data.value;
				$.ajax({
					url:'/api/car/location/'+cityId,
					success:function(res){
						if(res.success){
							for(var i =0;i<res.data.length;i++){
								$("#locationId").append("<option value=\""+res.data[i].id+"\">"+res.data[i].name+"</option>");
							}
							//重新渲染
							layui.form.render("select");
						}else{
							layer.msg(res.message);
						}
					}
				})
			});
		})
		function getCarType(){
			jQuery.ajax({
				url:'/api/car/type',
				success:function(res){
					if(res.success){
						for(var i =0;i<res.data.length;i++){
							jQuery("#typeId").append("<option value=\""+res.data[i].id+"\">"+res.data[i].name+"</option>");
						}
						//重新渲染
						layui.form.render("select");
					}else{
						layer.msg(res.message);
					}
				}
			});
		}
		function getCarBrand(){
			jQuery.ajax({
				url:'/api/car/brand',
				success:function(res){
					if(res.success){
						for(var i =0;i<res.data.length;i++){
							jQuery("#brandId").append("<option value=\""+res.data[i].id+"\">"+res.data[i].name+"</option>");
						}
						//重新渲染
						layui.form.render("select");
					}else{
						layer.msg(res.message);
					}
				}
			});
		}
		function getProvince(){
			debugger
			jQuery.ajax({
				url:'/api/car/province',
				success:function(res){
					if(res.success){
						for(var i =0;i<res.data.length;i++){
							jQuery("#provinceId").append("<option value=\""+res.data[i].id+"\">"+res.data[i].name+"</option>");
						}
						//重新渲染
						layui.form.render("select");
					}else{
						layer.msg(res.message);
					}
				}
			});
		}

		jQuery.ajax({
			url:'/api/car/selectAll',
			dataType:'json',
			type:'get',
			success:function(result){
				var str='';
				for(var i =0;i<result.data.length;i++){
					str+='<article class="col-sm-4 isotopeItem webdesign"> ' +
							'<div class="portfolio-item"> ' +
							'<img src="/image/'+result.data[i].imgUrl+'"  alt="" /> ' +
							'<div class="portfolio-desc align-center"> ' +
							'<div class="folio-info"> ' +
							'<a href="/image/'+result.data[i].imgUrl+'"  class="fancybox"> ' +
							'<h5>$'+result.data[i].price+'</h5> ' +
							'<i class="fa fa-link fa-2x"></i></a> </div> </div> </div> ' +
							'<div class="caption"> ' +
							'<h4 align="center"> <a href="/api/car/user/detail/'+result.data[i].id+'">'+result.data[i].name+' </a> </h4> ' +
							'</div> ' +
							'</article>';


				}
				jQuery("#carList").html('<div class="portfolio-items isotopeWrapper clearfix">'+str+'</div>');
			}
		})
	</script>
</body>
</html>
