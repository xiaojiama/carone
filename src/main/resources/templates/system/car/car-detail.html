<!DOCTYPE html>
<html lang="en"  xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <header th:replace="header::html"></header>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <style>
        *, :after, :before {
            box-sizing: border-box
        }
        div.box {
            height: 100px;
            padding: 10px;
            overflow: auto;
            border: 1px solid #8080FF;
            background-color: #E5E5FF
        }
        body {
            color: #73879C;
            background: #ECF0F1;
            font-family: "Helvetica Neue", Roboto, Arial, "Droid Sans", sans-serif;
            font-size: 13px;
            font-weight: 400;
            line-height: 1.471
        }
    </style>
</head>
<body>
<form class="layui-form" action="">
    <div class="mainBox">
        <div class="main-container">
            <div class="main-container">
                <div class="layui-row">
                    <div class="layui-row">
                        <div class="layui-col-md12">
                            <h2 style="width:30%" th:text="${car.name}"></h2>
                        </div>
                        <hr>
                        <div class="layui-col-md1">
                            &nbsp;
                        </div>
                        <div class="layui-col-md6">
                            <div class="layui-col-md10">
                                <div class="layui-carousel" id="test10">
                                    <div carousel-item="" id="demoList1">

                                    </div>
                                </div>
                            </div>
                            <div class="layui-col-md2">
                                &nbsp;
                            </div>
                        </div>
                        <div class="layui-col-md5">
                            <div class="layui-col-md12">
                                <h2>基本信息</h2>
                                <br/>
                                <div class="layui-col-md12">
                                    <div class="layui-col-md6">
                                        <h3>品牌 </h3>
                                        <br/>
                                        <p th:text="${car.carBrand.name}"></p>
                                        <br/>
                                    </div>
                                    <div class="layui-col-md6">
                                        <h3>类型 </h3>
                                        <br/>
                                        <p th:text="${car.carType.name}"></p>
                                        <br/>
                                    </div>
                                </div>
                                <div class="layui-col-md12">
                                    <div class="layui-col-md6">
                                        <h3>门店 </h3>
                                        <br/>
                                        <p th:text="${car.location.name}"></p>
                                        <br/>
                                    </div>
                                    <div class="layui-col-md6">
                                        <h3>价格 </h3>
                                        <br/>
                                        <p th:text="${car.price}"></p>
                                        <br/>
                                    </div>
                                </div>
                            </div>

                            <hr>
                            <div class="layui-col-md12">
                                <h2>详细信息</h2>
                                <br/>
                                <div class="layui-col-md12">
                                    <div class="layui-col-md6">
                                        <h3>年代款</h3>
                                        <br/>
                                        <p th:text="${detail.productYear}"></p>
                                        <br/>
                                    </div>
                                    <div class="layui-col-md6">
                                        <h3>配置款</h3>
                                        <br/>
                                        <p th:text="${detail.level}"></p>
                                        <br/>
                                    </div>
                                </div>
                                <div class="layui-col-md12">
                                    <div class="layui-col-md6">
                                        <h3>座位数</h3>
                                        <br/>
                                        <p th:text="${detail.seats}"></p>
                                        <br/>
                                    </div>
                                    <div class="layui-col-md6">
                                        <h3>车门数</h3>
                                        <br/>
                                        <p th:text="${detail.doors}"></p>
                                        <br/>
                                    </div>
                                </div>
                                <div class="layui-col-md12">
                                    <div class="layui-col-md6">
                                        <h3>燃料类型</h3>
                                        <br/>
                                        <p th:text="${detail.energy.name}"></p>
                                        <br/>
                                    </div>
                                    <div class="layui-col-md6">
                                        <h3>变速箱类型</h3>
                                        <br/>
                                        <p th:text="${detail.gear.name}"></p>
                                        <br/>
                                    </div>
                                </div>
                                <div class="layui-col-md12">
                                    <div class="layui-col-md6">
                                        <h3>排量</h3>
                                        <br/>
                                        <p th:text="${detail.displacement}"></p>
                                        <br/>
                                    </div>
                                    <div class="layui-col-md6">
                                        <h3>驱动方式</h3>
                                        <br/>
                                        <p th:text="${detail.drive}"></p>
                                        <br/>
                                    </div>
                                </div>
                                <div class="layui-col-md12">
                                    <div class="layui-col-md6">
                                        <h3>天窗</h3>
                                        <br/>
                                        <p th:text="${detail.upWindow}"></p>
                                        <br/>
                                    </div>
                                    <div class="layui-col-md6">
                                        <h3>雷达</h3>
                                        <br/>
                                        <p th:text="${detail.radar}"></p>
                                        <br/>
                                    </div>
                                </div>
                                <div class="layui-col-md12">
                                    <div class="layui-col-md12">
                                        <h3>相关证件</h3>
                                        <br/>
                                        <table class="layui-table" lay-even="" lay-skin="nob">
                                            <thead>
                                            <tr>
                                                <th></th>
                                            </tr>
                                            </thead>
                                            <tbody id="demoList"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                <div>
                    <input type="hidden" id="carId" th:value="${car.id}" name="carId" >
                    <input type="hidden" id="detailId" th:value="${detail.id}" name="detailId" >
                </div>

            </div>
        </div>
    </div>
    </div>
</form>
<script type="text/javascript" src="/component/jquery/jquery.min.js"></script>
<script>
    layui.use(['carousel','upload','form','jquery'],function(){
        let form = layui.form;
        let $ = layui.jquery;
        let carousel = layui.carousel;
        let upload = layui.upload;
        var carId = $("#carId").val();
        var carDetailId = $("#detailId").val();

        //图片轮播
        var ins = carousel.render({
            elem: '#test10'
            ,width: '600px'
            ,height: '400px'
            ,interval: 5000
            ,full: false //全屏
            ,arrow: 'none'
        });
        $.ajax({
            url:'/api/car/document/picture/'+carDetailId,
            dataType:'json',
            type:'get',
            success:function(result){
                var str;
                for(var i =0;i<result.data.length;i++){
                    str ='<div><img src="/image/'+result.data[i].saveName+'" ></div>'
                    $("#demoList1").append(str)
                    ins.reload({elem: '#test10'});//重置轮播图
                }
            }
        })
        $.ajax({
            url:'/api/car/document/'+carId,
            dataType:'json',
            type:'get',
            success:function(result){
                var str;
                for(var i =0;i<result.data.length;i++){
                    str ='<tr><td><a href="#" onclick="downLoad('+result.data[i].id+')">'+result.data[i].name+'</a></td></tr>'
                    $("#demoList").append(str)
                }
                form.render();
            }
        })

    })
    function downLoad(id){
        if(id=="undifind"){
            return false;
        }else{
            var link = document.createElement('a');
            link.href = "/api/document/down?id=" + id;
            link.click();
        }

    }

</script>
</body>
</html>